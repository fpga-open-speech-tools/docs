# Model Configuration
## model.json
This file is used to specify various hardware-related parameters for the Simulink system.  Examples include the FPGA target, sample frequency, and registers for the audio processing design.  This file is split into two sections; system and devices.

### System

The **system** node of the `model.json` file describes the target FPGA development board and the attributes of that target.  These parameters are generally dependent on the hardware itself and therefore are fixed.  An example system node and description of its parameters are shown below.

```    
"system": {
  "target": "audiomini",
  "sampleClockFrequency": 48000,
  "systemClockFrequency": 98304000,
  "processing": "channel",
  "audioIn": {
    "wordLength": 24,
    "fractionLength": 23,
    "signed": true,
    "numberOfChannels": 2
  },
    "audioOut": {
    "wordLength": 24,
    "fractionLength": 23,
    "signed": true,
    "numberOfChannels": 2
  }
}
```
- `target`: The hardware to run the device.  Current supported values are `audiomini`, `reflex`, and `audioblade`
- `sampleClockFrequency`: The sampling frequency of the audio codec
- `systemClockFequency`: The clock frequency of the FPGA design.  In the audio examples this is generated by a pll attached to a 12.288 MHz crystal.
- `processing`: The type of processing to perform.  `channel` processing combines left and right audio data on a single data signal and uses an Avalon streaming interface.  `sample` simply passes the sampled audio directly into the design without channel or valid signals.
- `audioIn` and `audioOut`: Descriptors of the audio interfaces to the AD1939 codec.
	- `wordLength`: The length, in bits, of the audio word
	- `fractionLength`: The number of fractional bits in the data word
	- `signed`: Whether or not to treat the word as a signed or unsigned word
	- `numberOfChannels`: The number of channels on a single data signal.

### Device
The device node of the `model.json` file configures the user-defined registers and controls for custom designs.  This node is composed of a list of devices as well as a list of registers for each device.  A specific example of a multi-register device is shown below and an example of a multi-device `model.json` file can be found in the [Beamer](https://github.com/fpga-open-speech-tools/simulink_models/tree/dev/models/Beamer) example design.
```
"devices": 
[
  {
    "name": "vector_gain",
    "registers": 
    [
      {
        "dataType": 
        {
          "fractionLength": 0,
          "signed": false,
          "type": "boolean",
          "wordLength": 1
        },
        "defaultValue": 1,
        "name": "enable",
        "registerNumber": 0
      },
    {
      "dataType": 
      {
        "fractionLength": 12,
        "signed": false,
        "type": "sdfds",
        "wordLength": 16
      },
      "defaultValue": 1,
      "name": "gain",
      "registerNumber": 1
      }
    ]
  }
]
```

- `name`: Name of the custom device.  This must match the name of the register signal in the Simulink model.
- `registers`: A node that contains the list of registers for the custom design
- `dataType`: A node that describes the register data type
	- `fractionLength`: The number of fractional bits in the data word
	- `signed`: Whether or not to treat the word as a signed or unsigned word	
  - `type`: Human readable data type for the register.  This is currently not parsed for use in the design.
  - `wordLength`: The length, in bits, of the register word
- `defaultValue`: The value that is loaded into the register on boot.
- `name`: Name of the control that is generated in the UI
- `registerNumber`: The number of the register.  This should start from 0.